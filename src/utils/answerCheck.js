// 활동지별 정답 정의
export const ANSWERS = {
  nature: {
    artifactName: '일월오봉도',
    natures: ['해', '달', '물', '소나무', '산봉우리'] // 일월오봉도에 그려진 다섯 가지 자연물
  },
  seal: {
    sealAnswer: '정의광덕', // 태조 추상시호 금보에 추가된 네 글자
    sealAnimalAnswer: '거북' // 왕의 어보에는 거북이 새겨져 있음
  },
  sealKing: {
    kingAnswer: '세종' // 조선의 4대 국왕은 세종
  },
  ceiling: {
    ceilingUsage: '천장' // 쌍용각보개는 정전이나 편전에서 국왕의 자리 천장에 사용되었다
  },
  clothing: {
    clothingAnswer: '면복' // 조선의 국왕이 입는 가장 격식있는 예복
  },
  portraitKing: {
    kingNumber: '21', // 조선 21대 왕
    kingName: '영조' // 영조
  },
  education: {
    educationAnswer: '보양청' // 왕위계승자인 원자가 글을 배우기 전까지의 교육을 맡던 시설
  },
  ceremonialSeal: {
    sealAnswer: '어보' // 조선 왕실의 의례용 인장으로, 왕비, 왕세자 등을 책봉하거나 덕을 기리는 이름을 올릴 때 지위와 이름을 새겼던 것
  },
  record: {
    recordAnswer: '국조보감' // 역대 국왕의 통치 행위 중 후대 왕이 본받을 만한 훌륭한 정치를 추려서 모은 책
  },
  politics: {
    politicsAnswer: '의정부' // 조선에서 국정을 총괄하는 기관
  },
  exam: {
    examAnswer: '343' // 이동춘이 무과 병과에 합격한 등수
  },
  age: {
    ageAnswer: '70' // 기로소에 들어갈 수 있는 나이
  },
  dragon: {
    dragonAnswer: '화재' // 경회루에 청동용을 가라앉힌 이유
  },
  queenSymbol: {
    queenSealAnswer: '왕비지보' // 왕비의 금보에 새겨진 문구
  },
  queenVirtue: {
    queenVirtueAnswer: '35' // 오륜행실도권3에 수록된 열녀 수
  },
  queenPolitics: {
    queenPoliticsAnswer: '수렴청정' // 어린 국왕이 즉위할 경우 국정을 운영하는 제도
  },
  queenSymbol2: {
    queenSymbol2Answer: ['친애', '해로'] // 적의에 새겨진 꿩과 오얏꽃 무늬가 상징하는 것
  },
  queenHairpin: {
    queenHairpinAnswer: '난초' // 영친왕비 도금가란화잠에 새겨진 무늬
  },
  queenBirth: {
    queenBirthAnswer: '동의보감' // 허준이 선조의 명을 받들어 편찬한 한의학 서적
  },
  queenPrincess: {
    queenPrincessAnswer: '순조' // 덕온공주가 사용한 인장의 주인인 공주의 아버지
  },
  queenClothing: {
    queenClothingAnswer: '홍색' // 왕비가 착용한 원삼의 색상
  },
  queenChima: {
    queenChimaAnswer: '대란치마' // 스란이 두 단인 치마
  },
  queenJewelry: {
    queenJewelryAnswer: '족두리' // 왕실 여성이 예복과 함께 착용한 머리 장식
  },
  queenEmbroidery: {
    queenEmbroideryAnswer: '신분' // 자수의 문양을 통해 나타낸 사용자의 것
  },
  queenNorigae: {
    queenNorigaeAnswer: '부부의 영원한 사랑' // 나비가 상징하는 것
  },
  queenFood: {
    queenFoodAnswer: '인문보' // 봉황 한 쌍과 길상 무늬를 그려 장식한 보자기
  },
  empire: {
    empireAnswer: '1897' // 대한제국을 선포한 년도
  },
  independence: {
    independenceAnswer: '독립신문' // 서재필이 창간한 한국 최초의 민간 신문
  },
  currency: {
    currencyAnswer: '호조태환권' // 우리나라 최초의 지폐이자 화폐교환 증서
  },
  altar: {
    altarAnswer: '환구단' // 동지와 정월 첫 신일에 제사를 올렸던 제단
  },
  palace: {
    palaceAnswer: '경운궁' // 대한제국의 법궁이자 오늘날 덕수궁으로 불리는 궁궐
  },
  dondeokjeon: {
    dondeokjeonAnswer: '돈덕전' // 고종이 외국 사신을 접견하거나 연회를 개최했던 서양식 건물
  },
  plumBlossom: {
    plumBlossomAnswer: '오앗꽃' // 대한제국 시기 상징 문양으로 여권, 초청장 등에서 볼 수 있는 꽃
  },
  hwajodo: {
    hwajodoAnswer: '다산' // 화조도가리개 제2폭의 산초열매가 뜻하는 것
  },
  peony: {
    peonyAnswer: '모란' // 궁궐의 장식그림으로 사용된 '꽃 중의 왕'이라 일컬어졌던 꽃
  },
  sealBook: {
    sealBookAnswer: '보소당인존' // 현종이 역대 군왕 및 국내외 명사들의 인장을 모아 만든 책
  },
  inkstone: {
    inkstoneAnswer: '징니석' // 평안북도 위원지방에서 나는 벼루를 만드는 돌
  },
  fiveRites: {
    fiveRitesAnswer: ['길례', '흉례', '군례', '빈례', '가례'] // 조선이 정비한 다섯 가지 예제
  },
  dongroe: {
    dongroeAnswer: '동뢰연' // 왕실 혼례 절차 중 왕과 왕비가 술과 음식을 함께 먹으며 인연을 맺는 궁중 잔치이자 절차
  },
  daesarye: {
    daesaryeAnswer: '대사례' // 국왕과 신하가 모여 성균관에서 활을 쏘는 의례
  },
  yeon: {
    yeonAnswer: '연' // 대비, 왕, 왕비, 왕세자, 왕세자빈이 행차 때 탔던 정식 가마
  },
  jeongchukgi: {
    jeongchukgiAnswer: '정축기' // 왕이 행차할 때 사용된 의장기로 부적 문자를 그린 육정기 중 하나, 소의 머리 모양이 그려진 의장기
  },
  honjeondogam: {
    honjeondogamAnswer: '혼전도감' // 왕의 장례식에서 장례 후 혼전에 신주를 모시고 삼년상을 치르는 일을 맡았던 임시 관청
  },
  jongmyo: {
    jongmyoAnswer: '종묘' // 17세기에 중건된 이래 온전하게 유지된 유교적 왕실 사당으로 유네스코 세계문화유산으로 등재된 곳
  },
  honcheoneui: {
    honcheoneuiAnswer: '선기옥형' // 천체의 운행을 나타내고 위치를 측정하는 천문 의기 혼천의의 다른 이름
  },
  calendar: {
    calendarAnswer: '역서' // 역법을 적용해 해마다 만드는 달력
  },
  ilseongjeongsiui: {
    ilseongjeongsiuiAnswer: '일성정시의' // 낮에는 해의 움직임을 따라, 밤에는 별의 움직임을 관측해 시간을 측정했던 기구
  },
  soilyeong: {
    soilyeongAnswer: '소일영' // 해시계의 한 종류로, 일성정시의에서 해시계의 기능만 살려 만든 시계
  },
  cheonsangyeolchabunyajido: {
    cheonsangyeolchabunyajidoAnswer: '천상열차분야지도' // 하늘을 여러 구역으로 나누어 놓은 천문도로 돌에 새겨 만들었으며, 1,467개의 별과 295개의 별자리가 새겨져 있는 각석
  }
  // 다른 활동지의 정답도 여기에 추가 가능
}

// 여러 정답 체크 (순서 무관)
export const checkMultipleAnswers = (activityId, fieldName, userAnswers) => {
  const correctAnswers = ANSWERS[activityId]?.[fieldName]
  if (!correctAnswers || !Array.isArray(correctAnswers)) {
    return { correct: true } // 정답이 정의되지 않은 경우 통과
  }
  
  // 사용자 답변 정규화 (대소문자, 공백 제거)
  const normalizedUserAnswers = userAnswers
    .map(answer => answer.replace(/\s+/g, '').toLowerCase())
    .filter(answer => answer.length > 0)
  
  // 정답 정규화
  const normalizedCorrectAnswers = correctAnswers
    .map(answer => answer.replace(/\s+/g, '').toLowerCase())
  
  // 모든 정답이 입력되었는지 확인
  if (normalizedUserAnswers.length !== normalizedCorrectAnswers.length) {
    return {
      correct: false,
      message: `${normalizedCorrectAnswers.length}가지 답을 모두 입력해주세요.`
    }
  }
  
  // 각 정답이 포함되어 있는지 확인 (순서 무관)
  const missingAnswers = []
  normalizedCorrectAnswers.forEach(correctAnswer => {
    if (!normalizedUserAnswers.includes(correctAnswer)) {
      missingAnswers.push(correctAnswer)
    }
  })
  
  if (missingAnswers.length > 0) {
    return {
      correct: false,
      message: `정답이 아닙니다. 다시 확인해보세요.`
    }
  }
  
  return { correct: true }
}

// 정답 체크 함수 (대소문자, 공백 무시)
export const checkAnswer = (activityId, fieldName, userAnswer) => {
  const answer = ANSWERS[activityId]?.[fieldName]
  if (!answer) return { correct: true } // 정답이 정의되지 않은 경우 통과
  
  // 대소문자, 공백 제거 후 비교
  const normalizedAnswer = answer.replace(/\s+/g, '').toLowerCase()
  const normalizedUserAnswer = userAnswer.replace(/\s+/g, '').toLowerCase()
  
  // 오앗꽃/오얏꽃 둘 다 인정
  if (activityId === 'plumBlossom' && fieldName === 'plumBlossomAnswer') {
    if (normalizedUserAnswer === '오앗꽃' || normalizedUserAnswer === '오얏꽃') {
      return { correct: true }
    }
  }
  
  if (normalizedUserAnswer === normalizedAnswer) {
    return { correct: true }
  } else {
    return { 
      correct: false, 
      message: `정답이 아닙니다. 다시 확인해보세요.` 
    }
  }
}

